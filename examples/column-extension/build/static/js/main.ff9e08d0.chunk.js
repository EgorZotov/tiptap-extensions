(this["webpackJsonp@gocapsule/column-extension-example"]=this["webpackJsonp@gocapsule/column-extension-example"]||[]).push([[0],{39:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);n(10);var r=n(24),o=n(23),i=n(32),a=n(15),s=n(28),c=n(27),u=(n(39),n(7));function l(t){var e=t.editor;return Object(u.jsx)("div",{className:"ToolbarContainer",children:Object(u.jsxs)("div",{className:"Toolbar",children:[Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleBold().run()},children:Object(u.jsx)(a.a,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleItalic().run()},children:Object(u.jsx)(a.h,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleStrike().run()},children:Object(u.jsx)(a.m,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleCode().run()},children:Object(u.jsx)(a.c,{})}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleHeading({level:1}).run()},children:Object(u.jsx)(a.e,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleHeading({level:2}).run()},children:Object(u.jsx)(a.f,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleHeading({level:3}).run()},children:Object(u.jsx)(a.g,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().setParagraph().run()},children:Object(u.jsx)(a.k,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleBulletList().run()},children:Object(u.jsx)(a.i,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleOrderedList().run()},children:Object(u.jsx)(a.j,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleCodeBlock().run()},children:Object(u.jsx)(a.b,{})}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleBlockquote().run()},children:Object(u.jsx)(a.d,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().setHorizontalRule().run()},children:Object(u.jsx)(a.l,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().unsetColumns().run()},children:Object(u.jsx)(c.a,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().setColumns(3).run()},children:Object(u.jsx)(s.a,{})})]})})}n(41);function f(t){var e=t.editor;return Object(u.jsxs)(o.a,{className:"Popover",editor:e,children:[Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleBold().run()},children:Object(u.jsx)(a.a,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleItalic().run()},children:Object(u.jsx)(a.h,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleStrike().run()},children:Object(u.jsx)(a.m,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleHeading({level:1}).run()},children:Object(u.jsx)(a.e,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleHeading({level:2}).run()},children:Object(u.jsx)(a.f,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().toggleCode().run()},children:Object(u.jsx)(a.c,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().unsetColumns().run()},children:Object(u.jsx)(c.a,{})}),Object(u.jsx)("div",{className:"icon",onClick:function(){return e.chain().focus().setColumns(3).run()},children:Object(u.jsx)(s.a,{})})]})}var h=n(9),d=n(17),p=n(13),v=n(3),m=n(16),y=n(14),g=n(11),k=n(12),b=n(19),x=n(4),O=n(5);function j(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=j(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function w(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=t.child(--o),s=e.child(--i),c=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var u=0,l=Math.min(a.text.length,s.text.length);u<l&&a.text[a.text.length-u-1]==s.text[s.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var f=w(a.content,s.content,n-1,r-1);if(f)return f}n-=c,r-=c}else n-=c,r-=c}}var S=function(){function t(e,n){if(Object(x.a)(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return Object(O.a)(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,a=0;a<e;i++){var s=this.content[i],c=a+s.nodeSize;if(c>t&&!1!==n(s,r+a,o||null,i)&&s.content.size){var u=a+1;s.nodesBetween(Math.max(0,t-u),Math.min(s.content.size,e-u),n,r+u)}a=c}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(a,s){a.isText?(o+=a.text.slice(Math.max(t,s)-s,e-s),i=!n):a.isLeaf?(r?o+="function"==typeof r?r(a):r:a.type.spec.leafText&&(o+=a.type.spec.leafText(a)),i=!n):!i&&a.isBlock&&(o+=n,i=!0)}),0),o}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new t(o,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],o=0;if(n>e)for(var i=0,a=0;a<n;i++){var s=this.content[i],c=a+s.nodeSize;c>e&&((a<e||c>n)&&(s=s.isText?s.cut(Math.max(0,e-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,e-a-1),Math.min(s.content.size,n-a-1))),r.push(s),o+=s.nodeSize),a=c}return new t(r,o)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new t(o,i)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return j(this,t,e)}},{key:"findDiffEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size;return w(this,t,e,n)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return M(0,t);if(t==this.size)return M(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?M(n+1,i):M(n,r);r=i}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,o=0;o<e.length;o++){var i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),t}();S.empty=new S([],0);var C={index:0,offset:0};function M(t,e){return C.index=t,C.offset=e,C}function N(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!N(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!N(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}var T=function(){function t(e,n){Object(x.a)(this,t),this.type=e,this.attrs=n}return Object(O.a)(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&N(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));return n.create(e.attrs)}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}]),t}();T.none=[];var I=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(O.a)(n)}(Object(b.a)(Error)),$=function(){function t(e,n,r){Object(x.a)(this,t),this.content=e,this.openStart=n,this.openEnd=r}return Object(O.a)(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=A(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(E(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new t(S.fromJSON(e,n.content),r,o)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new t(e,r,o)}}]),t}();function E(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,a=t.maybeChild(o),s=t.findIndex(n),c=s.index,u=s.offset;if(i==e||a.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,a.copy(E(a.content,e-i-1,n-i-1)))}function A(t,e,n,r){var o=t.findIndex(e),i=o.index,a=o.offset,s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=A(s.content,e-a-1,n);return c&&t.replaceChild(i,s.copy(c))}$.empty=new $(S.empty,0,0);var z=function(){function t(e,n,r){Object(x.a)(this,t),this.$from=e,this.$to=n,this.depth=r}return Object(O.a)(t,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),t}(),R=function(){function t(e,n){var r=this;Object(x.a)(this,t),this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}return Object(O.a)(t,[{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new V(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}},{key:"parseSlice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new V(this,e,!0);return n.addAll(t,e.from,e.to),$.maxOpen(n.finish())}},{key:"matchTag",value:function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(L(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(t)||i.context&&!n.matchesContext(i.context)||a.length>t.length&&(61!=a.charCodeAt(t.length)||a.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s||void 0}return i}}}}],[{key:"schemaRules",value:function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=W(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[e].spec.parseDOM;r&&r.forEach((function(t){n(t=W(t)),t.node=e}))};for(var a in t.nodes)i(a);return e}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}}]),t}(),B={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},F={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},P={ol:!0,ul:!0};function J(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}var D=function(){function t(e,n,r,o,i,a,s){Object(x.a)(this,t),this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=i,this.options=s,this.content=[],this.activeMarks=T.none,this.stashMarks=[],this.match=a||(4&s?null:e.contentMatch)}return Object(O.a)(t,[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(S.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}var o=S.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(S.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"popFromStashMark",value:function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}},{key:"applyPending",value:function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):q(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!B.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}]),t}(),V=function(){function t(e,n,r){Object(x.a)(this,t),this.parser=e,this.options=n,this.isOpen=r,this.open=0;var o,i=n.topNode,a=J(null,n.preserveWhitespace,0)|(r?4:0);o=i?new D(i.type,i.attrs,T.none,T.none,!0,n.topMatch||i.type.contentMatch,a):new D(r?null:e.schema.topNodeType,null,T.none,T.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}return Object(O.a)(t,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}}},{key:"addTextNode",value:function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,e){var n,r=t.nodeName.toLowerCase();P.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&P.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:F.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,a=this.top,s=this.needsBlock;if(B.hasOwnProperty(r))i=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(a),this.needsBlock=s}else this.addElementByRule(t,o,!1===o.consuming?n:void 0)}},{key:"leafFallback",value:function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(t){"BR"==t.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(t){var e=T.none;t:for(var n=0;n<t.length;n+=2)for(var r=void 0;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e}},{key:"addElementByRule",value:function(t,e,n){var r,o,i,a=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs||null,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var c=t;"string"==typeof e.contentElement?c=t.querySelector(e.contentElement):"function"==typeof e.contentElement?c=e.contentElement(t):e.contentElement&&(c=e.contentElement),this.findAround(t,c,!0),this.addAll(c)}r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}},{key:"addAll",value:function(t,e,n){for(var r=e||0,o=e?t.childNodes[e]:t.firstChild,i=null==n?null:t.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(o);this.findAtPoint(t,r)}},{key:"findPlace",value:function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length)||o.solid)break}if(!e)return!1;this.sync(n);for(var a=0;a<e.length;a++)this.enterInner(e[a],null,!1);return!0}},{key:"insertNode",value:function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)(!n.type||n.type.allowsMarkType(t.marks[o].type))&&(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}},{key:"enter",value:function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}},{key:"enterInner",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t);var i=J(t,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new D(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}},{key:"closeExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}},{key:"findAtPoint",value:function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}},{key:"findAround",value:function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}},{key:"matchesContext",value:function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(a,s){for(;a>=0;a--){var c=n[a];if(""==c){if(a==n.length-1||0==a)continue;for(;s>=i;s--)if(t(a-1,s))return!0;return!1}var u=s>0||0==s&&o?e.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;s--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}]),t}();function L(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function W(t){var e={};for(var n in t)e[n]=t[n];return e}function q(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(!o.allowsMarkType(t))return"continue";var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),a=o.type,s=o.next;if(a==e||i.indexOf(s)<0&&t(s))return!0}}(o.contentMatch)?{v:!0}:void 0};for(var o in n){var i=r(o);if("continue"!==i&&"object"===typeof i)return i.v}}var _=Math.pow(2,16);function H(t,e){return t+e*_}function K(t){return 65535&t}var G=function(){function t(e,n,r){Object(x.a)(this,t),this.pos=e,this.delInfo=n,this.recover=r}return Object(O.a)(t,[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}]),t}(),U=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(x.a)(this,t),this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}return Object(O.a)(t,[{key:"recover",value:function(t){var e,n=0,r=K(t);if(!this.inverted)for(var o=0;o<r;o++)n+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*r]+n+((e=t)-(65535&e))/_}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!0)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var c=this.ranges[a+o],u=this.ranges[a+i],l=s+c;if(t<=l){var f=s+r+((c?t==s?-1:t==l?1:e:e)<0?0:u);if(n)return f;var h=t==(e<0?s:l)?null:H(a/3,t-s),d=t==s?2:t==l?1:4;return(e<0?t!=s:t!=l)&&(d|=8),new G(f,d,h)}r+=u-c}return n?t+r:new G(t+r,0,null)}},{key:"touches",value:function(t,e){for(var n=0,r=K(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>t)break;var c=this.ranges[a+o];if(t<=s+c&&a==3*r)return!0;n+=this.ranges[a+i]-c}return!1}},{key:"forEach",value:function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(a,a+c,s,s+u),o+=u-c}}},{key:"invert",value:function(){return new t(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}}]),t}();U.empty=new U([]);var Q=Object.create(null),X=function(){function t(){Object(x.a)(this,t)}return Object(O.a)(t,[{key:"getMap",value:function(){return U.empty}},{key:"merge",value:function(t){return null}}],[{key:"fromJSON",value:function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Q[e.stepType];if(!n)throw new RangeError("No step type ".concat(e.stepType," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in Q)throw new RangeError("Duplicate use of step JSON ID "+t);return Q[t]=e,e.prototype.jsonID=t,e}}]),t}(),Y=function(){function t(e,n){Object(x.a)(this,t),this.doc=e,this.failed=n}return Object(O.a)(t,null,[{key:"ok",value:function(e){return new t(e,null)}},{key:"fail",value:function(e){return new t(null,e)}},{key:"fromReplace",value:function(e,n,r,o){try{return t.ok(e.replace(n,r,o))}catch(i){if(i instanceof I)return t.fail(i.message);throw i}}}]),t}();function Z(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(Z(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return S.fromArray(r)}var tt=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t,r,o){var i;return Object(x.a)(this,n),(i=e.call(this)).from=t,i.to=r,i.mark=o,i}return Object(O.a)(n,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new $(Z(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Y.fromReplace(t,this.from,this.to,i)}},{key:"invert",value:function(){return new et(this.from,this.to,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new n(e.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}}]),n}(X);X.jsonID("addMark",tt);var et=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t,r,o){var i;return Object(x.a)(this,n),(i=e.call(this)).from=t,i.to=r,i.mark=o,i}return Object(O.a)(n,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=new $(Z(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))}),t),n.openStart,n.openEnd);return Y.fromReplace(t,this.from,this.to,r)}},{key:"invert",value:function(){return new tt(this.from,this.to,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new n(e.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}}]),n}(X);X.jsonID("removeMark",et);var nt=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(x.a)(this,n),(i=e.call(this)).from=t,i.to=r,i.slice=o,i.structure=a,i}return Object(O.a)(n,[{key:"apply",value:function(t){return this.structure&&ot(t,this.from,this.to)?Y.fail("Structure replace would overwrite content"):Y.fromReplace(t,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new U([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(t){return new n(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new n(e.pos,Math.max(e.pos,r.pos),this.slice)}},{key:"merge",value:function(t){if(!(t instanceof n)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var e=this.slice.size+t.slice.size==0?$.empty:new $(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new n(t.from,this.to,e,this.structure)}var r=this.slice.size+t.slice.size==0?$.empty:new $(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new n(this.from,this.to+(t.to-t.from),r,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(e.from,e.to,$.fromJSON(t,e.slice),!!e.structure)}}]),n}(X);X.jsonID("replace",nt);var rt=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t,r,o,i,a,s){var c,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(x.a)(this,n),(c=e.call(this)).from=t,c.to=r,c.gapFrom=o,c.gapTo=i,c.slice=a,c.insert=s,c.structure=u,c}return Object(O.a)(n,[{key:"apply",value:function(t){if(this.structure&&(ot(t,this.from,this.gapFrom)||ot(t,this.gapTo,this.to)))return Y.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Y.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Y.fromReplace(t,this.from,this.to,n):Y.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new U([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(t){var e=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||o<e.pos||i>r.pos?null:new n(e.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(e.from,e.to,e.gapFrom,e.gapTo,$.fromJSON(t,e.slice),e.insert,!!e.structure)}}]),n}(X);function ot(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function it(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function at(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!it(r,o,i))break}return null}function st(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=ut(t,e),i=o&&lt(r,e);return i?o.map(ct).concat({type:e,attrs:n}).concat(i.map(ct)):null}function ct(t){return{type:t,attrs:null}}function ut(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}function lt(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:e).contentMatch,c=r;s&&c<o;c++)s=s.matchType(n.child(c).type);return s&&s.validEnd?a:null}function ft(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.resolve(e),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,c=n-2;s>i;s--,c--){var u=o.node(s),l=o.index(s);if(u.type.spec.isolating)return!1;var f=u.content.cutByIndex(l,u.childCount),h=r&&r[c]||u;if(h!=u&&(f=f.replaceChild(0,h.type.create(h.attrs))),!u.canReplace(l+1,u.childCount)||!h.type.validContent(f))return!1}var d=o.indexAfter(i),p=r&&r[0];return o.node(i).canReplaceWith(d,d,p?p.type:o.node(i+1).type)}function ht(t,e){var n=t.resolve(e),r=n.index();return function(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function dt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.empty;if(e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return pt(o,i,r)?new nt(e,n,r):new vt(o,i,r).fit()}function pt(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}X.jsonID("replaceAround",rt);var vt=function(){function t(e,n,r){Object(x.a)(this,t),this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=S.empty;for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(var a=e.depth;a>0;a--)this.placed=S.from(e.node(a).copy(this.placed))}return Object(O.a)(t,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var c=new $(i,a,s);return e>-1?new rt(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new nt(r.pos,o.pos,c):null}},{key:"findFittable",value:function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,r=null;e?n=(r=gt(this.unplaced.content,e-1).firstChild).content:n=this.unplaced.content;for(var o=n.firstChild,i=this.depth;i>=0;i--){var a=this.frontier[i],s=a.type,c=a.match,u=void 0,l=null;if(1==t&&(o?c.matchType(o.type)||(l=c.fillBefore(S.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:i,parent:r,inject:l};if(2==t&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:r,wrap:u};if(r&&c.matchType(r.type))break}}}},{key:"openMore",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=gt(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new $(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}},{key:"dropNode",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=gt(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new $(mt(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new $(mt(e,n,1),n,r)}},{key:"placeNodes",value:function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,c=r?r.content:s.content,u=s.openStart-e,l=0,f=[],h=this.frontier[n],d=h.match,p=h.type;if(o){for(a=0;a<o.childCount;a++)f.push(o.child(a));d=d.matchFragment(o)}for(var v=c.size+e-(s.content.size-s.openEnd);l<c.childCount;){var m=c.child(l),y=d.matchType(m.type);if(!y)break;(++l>1||0==u||m.content.size)&&(d=y,f.push(kt(m.mark(p.allowedMarks(m.marks)),1==l?u:0,l==c.childCount?v:-1)))}var g=l==c.childCount;g||(v=-1),this.placed=yt(this.placed,n,S.from(f)),this.frontier[n].match=d,g&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,b=c;k<v;k++){var x=b.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),b=x.content}this.unplaced=g?0==e?$.empty:new $(mt(s.content,e-1,1),e-1,v<0?s.openEnd:e-1):new $(mt(s.content,e,l),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!bt(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=bt(t,e,o,r,i);if(a){for(var s=e-1;s>=0;s--){var c=this.frontier[s],u=c.match,l=bt(t,s,c.type,u,!0);if(!l||l.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}}},{key:"close",value:function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=yt(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t}},{key:"openFrontierNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=yt(this.placed,this.depth,S.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}},{key:"closeFrontierNode",value:function(){var t=this.frontier.pop().match.fillBefore(S.empty,!0);t.childCount&&(this.placed=yt(this.placed,this.frontier.length,t))}}]),t}();function mt(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(mt(t.firstChild.content,e-1,n)))}function yt(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(yt(t.lastChild.content,e-1,n)))}function gt(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function kt(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,kt(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(S.empty,!0)))),t.copy(r)}function bt(t,e,n,r,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}var xt=Error;((xt=function t(e){var n=Error.call(this,e);return n.__proto__=t.prototype,n}).prototype=Object.create(Error.prototype)).constructor=xt,xt.prototype.name="TransformError";var Ot=Object.create(null),jt=function(){function t(e,n,r){Object(x.a)(this,t),this.$anchor=e,this.$head=n,this.ranges=r||[new wt(e.min(n),e.max(n))]}return Object(O.a)(t,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.empty,n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,a=this.ranges,s=0;s<a.length;s++){var c=a[s],u=c.$from,l=c.$to,f=t.mapping.slice(i);t.replaceRange(f.map(u.pos),f.map(l.pos),s?$.empty:e),0==s&&zt(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,c=t.mapping.slice(n),u=c.map(a.pos),l=c.map(s.pos);o?t.deleteRange(u,l):(t.replaceRangeWith(u,l,e),zt(t,n,e.isInline?-1:1))}}},{key:"getBookmark",value:function(){return Mt.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.parent.inlineContent?new Mt(t):At(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?At(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):At(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}return null}},{key:"near",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(t,e)||this.findFrom(t,-e)||new $t(t.node(0))}},{key:"atStart",value:function(t){return At(t,t,0,0,1)||new $t(t)}},{key:"atEnd",value:function(t){return At(t,t,t.content.size,t.childCount,-1)||new $t(t)}},{key:"fromJSON",value:function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Ot[e.type];if(!n)throw new RangeError("No selection type ".concat(e.type," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in Ot)throw new RangeError("Duplicate use of selection JSON ID "+t);return Ot[t]=e,e.prototype.jsonID=t,e}}]),t}();jt.prototype.visible=!0;var wt=Object(O.a)((function t(e,n){Object(x.a)(this,t),this.$from=e,this.$to=n})),St=!1;function Ct(t){!St&&!t.parent.inlineContent&&(St=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var Mt=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return Object(x.a)(this,n),Ct(t),Ct(r),e.call(this,t,r)}return Object(O.a)(n,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(t,e){var r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return jt.near(r);var o=t.resolve(e.map(this.anchor));return new n(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.empty;if(Object(m.a)(Object(y.a)(n.prototype),"replace",this).call(this,t,e),e==$.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor&&t.head==this.head}},{key:"getBookmark",value:function(){return new Nt(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(t.resolve(e.anchor),t.resolve(e.head))}},{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}},{key:"between",value:function(t,e,r){var o=t.pos-e.pos;if((!r||o)&&(r=o>=0?1:-1),!e.parent.inlineContent){var i=jt.findFrom(e,r,!0)||jt.findFrom(e,-r,!0);if(!i)return jt.near(e,r);e=i.$head}return t.parent.inlineContent||(0==o?t=e:(t=(jt.findFrom(t,-r,!0)||jt.findFrom(t,r,!0)).$anchor).pos<e.pos!=o<0&&(t=e)),new n(t,e)}}]),n}(jt);jt.jsonID("text",Mt);var Nt=function(){function t(e,n){Object(x.a)(this,t),this.anchor=e,this.head=n}return Object(O.a)(t,[{key:"map",value:function(e){return new t(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(t){return Mt.between(t.resolve(this.anchor),t.resolve(this.head))}}]),t}(),Tt=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t){var r;Object(x.a)(this,n);var o=t.nodeAfter,i=t.node(0).resolve(t.pos+o.nodeSize);return(r=e.call(this,t,i)).node=o,r}return Object(O.a)(n,[{key:"map",value:function(t,e){var r=e.mapResult(this.anchor),o=r.deleted,i=r.pos,a=t.resolve(i);return o?jt.near(a):new n(a)}},{key:"content",value:function(){return new $(S.from(this.node),0,0)}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new It(this.anchor)}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(t.resolve(e.anchor))}},{key:"create",value:function(t,e){return new n(t.resolve(e))}},{key:"isSelectable",value:function(t){return!t.isText&&!1!==t.type.spec.selectable}}]),n}(jt);Tt.prototype.visible=!1,jt.jsonID("node",Tt);var It=function(){function t(e){Object(x.a)(this,t),this.anchor=e}return Object(O.a)(t,[{key:"map",value:function(e){var n=e.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new Nt(o,o):new t(o)}},{key:"resolve",value:function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Tt.isSelectable(n)?new Tt(e):jt.near(e)}}]),t}(),$t=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t){return Object(x.a)(this,n),e.call(this,t.resolve(0),t.resolve(t.content.size))}return Object(O.a)(n,[{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.empty;if(e==$.empty){t.delete(0,t.doc.content.size);var r=jt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else Object(m.a)(Object(y.a)(n.prototype),"replace",this).call(this,t,e)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(t){return new n(t)}},{key:"eq",value:function(t){return t instanceof n}},{key:"getBookmark",value:function(){return Et}}],[{key:"fromJSON",value:function(t){return new n(t)}}]),n}(jt);jt.jsonID("all",$t);var Et={map:function(){return this},resolve:function(t){return new $t(t)}};function At(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.inlineContent)return Mt.create(t,n);for(var a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var s=e.child(a);if(s.isAtom){if(!i&&Tt.isSelectable(s))return Tt.create(t,n-(o<0?s.nodeSize:0))}else{var c=At(t,s,n+o,o<0?s.childCount:0,o,i);if(c)return c}n+=s.nodeSize*o}return null}function zt(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];if(i instanceof nt||i instanceof rt)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(jt.near(t.doc.resolve(o),n))}}function Rt(t,e){return e&&t?t.bind(e):t}var Bt=Object(O.a)((function t(e,n,r){Object(x.a)(this,t),this.name=e,this.init=Rt(n.init,r),this.apply=Rt(n.apply,r)}));function Ft(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=Ft(o,e,{})),n[r]=o}return n}new Bt("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Bt("selection",{init:function(t,e){return t.selection||jt.atStart(e.doc)},apply:function(t){return t.selection}}),new Bt("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Bt("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}});var Pt=function(){function t(e){Object(x.a)(this,t),this.spec=e,this.props={},e.props&&Ft(e.props,this,this.props),this.key=e.key?e.key.key:Dt("plugin")}return Object(O.a)(t,[{key:"getState",value:function(t){return t[this.key]}}]),t}(),Jt=Object.create(null);function Dt(t){return t in Jt?t+"$"+ ++Jt[t]:(Jt[t]=0,t+"$")}var Vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";Object(x.a)(this,t),this.key=Dt(e)}return Object(O.a)(t,[{key:"get",value:function(t){return t.config.pluginsByKey[this.key]}},{key:"getState",value:function(t){return t[this.key]}}]),t}();function Lt(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}function Wt(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function qt(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var _t=function(t,e){var n=t.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&at(i);return null!=a&&(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)};function Ht(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Kt(t,e,n){var r,o,i=e.nodeBefore,a=e.nodeAfter;if(i.type.spec.isolating||a.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(i,i+1)||!o.isTextblock&&!ht(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;var s=e.parent.canReplace(e.index(),e.index()+1);if(s&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var c=e.pos+a.nodeSize,u=S.empty,l=r.length-1;l>=0;l--)u=S.from(r[l].create(null,u));u=S.from(i.copy(u));var f=t.tr.step(new rt(e.pos-1,c,e.pos,c,new $(u,1,0),r.length,!0)),h=c+2*r.length;ht(f.doc,h)&&f.join(h),n(f.scrollIntoView())}return!0}var d=jt.findFrom(e,1),p=d&&d.$from.blockRange(d.$to),v=p&&at(p);if(null!=v&&v>=e.depth)return n&&n(t.tr.lift(p,v).scrollIntoView()),!0;if(s&&Lt(a,"start",!0)&&Lt(i,"end")){for(var m=i,y=[];y.push(m),!m.isTextblock;)m=m.lastChild;for(var g=a,k=1;!g.isTextblock;g=g.firstChild)k++;if(m.canReplace(m.childCount,m.childCount,g.content)){if(n){for(var b=S.empty,x=y.length-1;x>=0;x--)b=S.from(y[x].copy(b));n(t.tr.step(new rt(e.pos-y.length,e.pos+a.nodeSize,e.pos+k,e.pos+a.nodeSize-k,new $(b,y.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Gt(t){return function(e,n){for(var r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(e.tr.setSelection(Mt.create(e.doc,t<0?o.start(i):o.end(i)))),!0)}}var Ut=Gt(-1),Qt=Gt(1);function Xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),c=s&&st(s,t,e);return!!c&&(r&&r(n.tr.wrap(s,c).scrollIntoView()),!0)}}function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.from,a=o.to,s=!1;return n.doc.nodesBetween(i,a,(function(r,o){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)s=!0;else{var i=n.doc.resolve(o),a=i.index();s=i.parent.canReplaceWith(a,a+1,t)}})),!!s&&(r&&r(n.tr.setBlockType(i,a,t,e).scrollIntoView()),!0)}}function Zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),c=!1,u=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&0==s.startIndex){if(0==i.index(s.depth-1))return!1;var l=n.doc.resolve(s.start-2);u=new z(l,l,s.depth),s.endIndex<s.parent.childCount&&(s=new z(i,n.doc.resolve(a.end(s.depth)),s.depth)),c=!0}var f=st(u,t,e,s);return!!f&&(r&&r(te(n.tr,s,f,c,t).scrollIntoView()),!0)}}function te(t,e,n,r,o){for(var i=S.empty,a=n.length-1;a>=0;a--)i=S.from(n[a].type.create(n[a].attrs,i));t.step(new rt(e.start-(r?2:0),e.end,e.start,e.end,new $(i,0,0),n.length,!0));for(var s=0,c=0;c<n.length;c++)n[c].type==o&&(s=c+1);for(var u=n.length-s,l=e.start+n.length-(r?2:0),f=e.parent,h=e.startIndex,d=e.endIndex,p=!0;h<d;h++,p=!1)!p&&ft(t.doc,l,u)&&(t.split(l,u),l+=2*u),l+=f.child(h).nodeSize;return t}function ee(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==t}));return!!a&&(!n||(o.node(a.depth-1).type==t?function(t,e,n,r){var o=t.tr,i=r.end,a=r.$to.end(r.depth);return i<a&&(o.step(new rt(i-1,a,i,a,new $(S.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new z(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth)),e(o.lift(r,at(r)).scrollIntoView()),!0}(e,n,t,a):function(t,e,n){for(var r=t.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var c=r.doc.resolve(n.start),u=c.nodeAfter;if(r.mapping.map(n.end)!=n.start+c.nodeAfter.nodeSize)return!1;var l=0==n.startIndex,f=n.endIndex==o.childCount,h=c.node(-1),d=c.index(-1);if(!h.canReplace(d+(l?0:1),d+1,u.content.append(f?S.empty:S.from(o))))return!1;var p=c.pos,v=p+u.nodeSize;return r.step(new rt(p-(l?1:0),v+(f?1:0),p+1,v-1,new $((l?S.empty:S.from(o.copy(S.empty))).append(f?S.empty:S.from(o.copy(S.empty))),l?0:1,f?0:1),l?0:1)),e(r.scrollIntoView()),!0}(e,n,a)))}}function ne(t){var e=t.state,n=t.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return Object(v.a)(Object(v.a)({},e),{},{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();var re=function(){function t(e){Object(x.a)(this,t),this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}return Object(O.a)(t,[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var t=this,e=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map((function(e){var n=Object(p.a)(e,2),r=n[0],s=n[1];return[r,function(){var e=s.apply(void 0,arguments)(a);return!i.getMeta("preventDispatch")&&!t.hasCustomState&&o.dispatch(i),e}]})))}},{key:"chain",get:function(){var t=this;return function(){return t.createChain()}}},{key:"can",get:function(){var t=this;return function(){return t.createCan()}}},{key:"createChain",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s=[],c=!!t,u=t||i.tr,l=function(){return!c&&n&&!u.getMeta("preventDispatch")&&!e.hasCustomState&&a.dispatch(u),s.every((function(t){return!0===t}))},f=Object(v.a)(Object(v.a)({},Object.fromEntries(Object.entries(r).map((function(t){var r=Object(p.a)(t,2),o=r[0],i=r[1];return[o,function(){var t=e.buildProps(u,n),r=i.apply(void 0,arguments)(t);return s.push(r),f}]})))),{},{run:l});return f}},{key:"createCan",value:function(t){var e=this,n=this.rawCommands,r=this.state,o=void 0,i=t||r.tr,a=this.buildProps(i,o);return Object(v.a)(Object(v.a)({},Object.fromEntries(Object.entries(n).map((function(t){var e=Object(p.a)(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(Object(v.a)(Object(v.a)({},a),{},{dispatch:o}))}]})))),{},{chain:function(){return e.createChain(i,o)}})}},{key:"buildProps",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view;i.storedMarks&&t.setStoredMarks(i.storedMarks);var s={tr:t,editor:o,view:a,state:ne({state:i,transaction:t}),dispatch:n?function(){}:void 0,chain:function(){return e.createChain(t)},can:function(){return e.createCan(t)},get commands(){return Object.fromEntries(Object.entries(r).map((function(t){var e=Object(p.a)(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(s)}]})))}};return s}}]),t}();function oe(t,e,n){return void 0===t.config[e]&&t.parent?oe(t.parent,e,n):"function"==typeof t.config[e]?t.config[e].bind(Object(v.a)(Object(v.a)({},n),{},{parent:t.parent?oe(t.parent,e,n):null})):t.config[e]}function ie(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error("There is no node type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.nodes[t]}return t}function ae(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return!!t})).reduce((function(t,e){var n=Object(v.a)({},t);return Object.entries(e).forEach((function(t){var e=Object(p.a)(t,2),r=e[0],o=e[1];n[r]?n[r]="class"===r?[n[r],o].join(" "):"style"===r?[n[r],o].join("; "):o:n[r]=o})),n}),{})}function se(t){return"function"==typeof t}function ce(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return se(t)?e?t.bind(e).apply(void 0,r):t.apply(void 0,r):t}function ue(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function le(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function fe(t,e){var n=Object(v.a)({},t);return le(t)&&le(e)&&Object.keys(e).forEach((function(r){le(e[r])&&r in t?n[r]=fe(t[r],e[r]):Object.assign(n,Object(d.a)({},r,e[r]))})),n}var he=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(x.a)(this,t),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Object(v.a)(Object(v.a)({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ce(oe(this,"addOptions",{name:this.name}))),this.storage=ce(oe(this,"addStorage",{name:this.name,options:this.options}))||{}}return Object(O.a)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=fe(this.options,t),e.storage=ce(oe(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=ce(oe(n,"addOptions",{name:n.name})),n.storage=ce(oe(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}();he.create({name:"clipboardTextSerializer",addProseMirrorPlugins:function(){var t=this;return[new Pt({key:new Vt("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var e=t.editor,n=e.state,r=e.schema,o=n.doc,i=n.selection.ranges,a=Math.min.apply(Math,Object(h.a)(i.map((function(t){return t.$from.pos})))),s=Math.max.apply(Math,Object(h.a)(i.map((function(t){return t.$to.pos})))),c=function(t){return Object.fromEntries(Object.entries(t.nodes).filter((function(t){return Object(p.a)(t,2)[1].spec.toText})).map((function(t){var e=Object(p.a)(t,2);return[e[0],e[1].spec.toText]})))}(r);return function(t,e,n){var r=e.from,o=e.to,i=n||{},a=i.blockSeparator,s=void 0===a?"\n\n":a,c=i.textSerializers,u=void 0===c?{}:c,l="",f=!0;return t.nodesBetween(r,o,(function(t,n,i,a){var c,h=null==u?void 0:u[t.type.name];h?(t.isBlock&&!f&&(l+=s,f=!0),i&&(l+=h({node:t,pos:n,parent:i,index:a,range:e}))):t.isText?(l+=null===(c=null==t?void 0:t.text)||void 0===c?void 0:c.slice(Math.max(r,n)-n,o-n),f=!1):t.isBlock&&!f&&(l+=s,f=!0)})),l}(o,{from:a,to:s},{textSerializers:c})}}})]}});function de(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(e);return!r.length||r.every((function(r){return n.strict?e[r]===t[r]:ue(e[r])?e[r].test(t[r]):e[r]===t[r]}))}function pe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.find((function(t){return t.type===e&&de(t.attrs,n)}))}function ve(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!pe(t,e,n)}function me(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){var r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),r.node){var o=pe(Object(h.a)(r.node.marks),e,n);if(o){var i=r.index,a=t.start()+r.offset,s=i+1,c=a+r.node.nodeSize;for(pe(Object(h.a)(r.node.marks),e,n);i>0&&o.isInSet(t.parent.child(i-1).marks);)i-=1,a-=t.parent.child(i).nodeSize;for(;s<t.parent.childCount&&ve(Object(h.a)(t.parent.child(s).marks),e,n);)c+=t.parent.child(s).nodeSize,s+=1;return{from:a,to:c}}}}}function ye(t,e){if("string"==typeof t){if(!e.marks[t])throw Error("There is no mark type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.marks[t]}return t}function ge(t){return function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!function(t){var e;return"class"===(null===(e=t.constructor)||void 0===e?void 0:e.toString().substring(0,5))}(t)}(t)&&t instanceof Mt}function ke(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(t,e),n)}function be(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;var n=jt.atStart(t),r=jt.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return r;var o=n.from,i=r.to;return"all"===e?Mt.create(t,ke(0,o,i),ke(t.content.size,o,i)):Mt.create(t,ke(e,o,i),ke(e,o,i))}function xe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Oe(t){var e="<body>".concat(t,"</body>");return(new window.DOMParser).parseFromString(e,"text/html").body}function je(t,e,n){if(n=Object(v.a)({slice:!0,parseOptions:{}},n),"object"==typeof t&&null!==t)try{return Array.isArray(t)?S.fromArray(t.map((function(t){return e.nodeFromJSON(t)}))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),je("",e,n)}if("string"==typeof t){var r=R.fromSchema(e);return n.slice?r.parseSlice(Oe(t),n.parseOptions).content:r.parse(Oe(t),n.parseOptions)}return je("",e,n)}function we(){return typeof navigator<"u"&&/Mac/.test(navigator.platform)}function Se(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,o=r.from,i=r.to,a=r.empty,s=e?ie(e,t.schema):null,c=[];t.doc.nodesBetween(o,i,(function(t,e){if(!t.isText){var n=Math.max(o,e),r=Math.min(i,e+t.nodeSize);c.push({node:t,from:n,to:r})}}));var u=i-o,l=c.filter((function(t){return!s||s.name===t.node.type.name})).filter((function(t){return de(t.node.attrs,n,{strict:!1})}));return a?!!l.length:l.reduce((function(t,e){return t+e.to-e.from}),0)>=u}function Ce(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Me(t,e){var n="string"==typeof e?[e]:e;return Object.keys(t).reduce((function(e,r){return n.includes(r)||(e[r]=t[r]),e}),{})}function Ne(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return je(t,e,{slice:!1,parseOptions:n})}function Te(t,e){var n=ye(e,t.schema),r=t.selection,o=r.from,i=r.to,a=r.empty,s=[];a?(t.storedMarks&&s.push.apply(s,Object(h.a)(t.storedMarks)),s.push.apply(s,Object(h.a)(t.selection.$head.marks()))):t.doc.nodesBetween(o,i,(function(t){s.push.apply(s,Object(h.a)(t.marks))}));var c=s.find((function(t){return t.type.name===n.name}));return c?Object(v.a)({},c.attrs):{}}function Ie(t,e,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=Object(p.a)(n,1)[0],o=t.find((function(t){return t.type===e&&t.name===r}));return!!o&&o.attribute.keepOnSplit})))}function $e(t){for(var e=0;e<t.edgeCount;e+=1){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Ee(t,e){var n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){var r=n.filter((function(t){return null==e?void 0:e.includes(t.type.name)}));t.tr.ensureMarks(r)}}function Ae(t){return function(e){return function(t,e){for(var n=t.depth;n>0;n-=1){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}(e.$from,t)}}function ze(t,e){var n=function(t){return{baseExtensions:t.filter((function(t){return"extension"===t.type})),nodeExtensions:t.filter((function(t){return"node"===t.type})),markExtensions:t.filter((function(t){return"mark"===t.type}))}}(e),r=n.nodeExtensions.find((function(e){return e.name===t}));if(!r)return!1;var o=ce(oe(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}var Re=function(t,e){var n=Ae((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var o=t.doc.nodeAt(r);return n.node.type===(null==o?void 0:o.type)&&ht(t.doc,n.pos)&&t.join(n.pos),!0},Be=function(t,e){var n=Ae((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=t.doc.nodeAt(r);return n.node.type===(null==o?void 0:o.type)&&ht(t.doc,r)&&t.join(r),!0};function Fe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,o=r.empty,i=r.ranges,a=e?ye(e,t.schema):null;if(o)return!!(t.storedMarks||t.selection.$from.marks()).filter((function(t){return!a||a.name===t.type.name})).find((function(t){return de(t.attrs,n,{strict:!1})}));var s=0,c=[];if(i.forEach((function(e){var n=e.$from,r=e.$to,o=n.pos,i=r.pos;t.doc.nodesBetween(o,i,(function(t,e){if(t.isText||t.marks.length){var n=Math.max(o,e),r=Math.min(i,e+t.nodeSize);s+=r-n,c.push.apply(c,Object(h.a)(t.marks.map((function(t){return{mark:t,from:n,to:r}}))))}}))})),0===s)return!1;var u=c.filter((function(t){return!a||a.name===t.mark.type.name})).filter((function(t){return de(t.mark.attrs,n,{strict:!1})})).reduce((function(t,e){return t+e.to-e.from}),0),l=c.filter((function(t){return!a||t.mark.type!==a&&t.mark.type.excludes(a)})).reduce((function(t,e){return t+e.to-e.from}),0);return(u>0?u+l:u)>=s}var Pe=Object.freeze({__proto__:null,blur:function(){return function(t){var e=t.editor,n=t.view;return requestAnimationFrame((function(){var t;e.isDestroyed||(n.dom.blur(),null===(t=null==window?void 0:window.getSelection())||void 0===t||t.removeAllRanges())})),!0}},clearContent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return e.commands.setContent("",t)}},clearNodes:function(){return function(t){var e=t.state,n=t.tr,r=t.dispatch,o=n.selection.ranges;return r&&o.forEach((function(t){var r=t.$from,o=t.$to;e.doc.nodesBetween(r.pos,o.pos,(function(t,e){if(!t.type.isText){var r=n.doc,o=n.mapping,i=r.resolve(o.map(e)),a=r.resolve(o.map(e+t.nodeSize)),s=i.blockRange(a);if(s){var c=at(s);if(t.type.isTextblock){var u=i.parent.contentMatchAt(i.index()).defaultType;n.setNodeMarkup(s.start,u)}(c||0===c)&&n.lift(s,c)}}}))})),!0}},command:function(t){return function(e){return t(e)}},createParagraphNear:function(){return function(t){return function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(n instanceof $t||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Ht(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=t.tr.insert(a,i.createAndFill());s.setSelection(Mt.create(s.doc,a+1)),e(s.scrollIntoView())}return!0}(t.state,t.dispatch)}},deleteNode:function(t){return function(e){for(var n=e.tr,r=e.state,o=e.dispatch,i=ie(t,r.schema),a=n.selection.$anchor,s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(o){var c=a.before(s),u=a.after(s);n.delete(c,u).scrollIntoView()}return!0}return!1}},deleteRange:function(t){return function(e){var n=e.tr,r=e.dispatch,o=t.from,i=t.to;return r&&n.delete(o,i),!0}},deleteSelection:function(){return function(t){return function(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}(t.state,t.dispatch)}},enter:function(){return function(t){return t.commands.keyboardShortcut("Enter")}},exitCode:function(){return function(t){return function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=Ht(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(e){var c=r.after(),u=t.tr.replaceWith(c,c,s.createAndFill());u.setSelection(jt.near(u.doc.resolve(c),1)),e(u.scrollIntoView())}return!0}(t.state,t.dispatch)}},extendMarkRange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=ye(t,o.schema),s=r.doc,c=r.selection,u=c.$from,l=c.from,f=c.to;if(i){var h=me(u,a,e);if(h&&h.from<=l&&h.to>=f){var d=Mt.create(s,h.from,h.to);r.setSelection(d)}}return!0}},first:function(t){return function(e){for(var n="function"==typeof t?t(e):t,r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1}},focus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.editor,o=n.view,i=n.tr,a=n.dispatch;e=Object(v.a)({scrollIntoView:!0},e);var s=function(){xe()&&o.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(o.focus(),null!=e&&e.scrollIntoView&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===t||!1===t)return!0;if(a&&null===t&&!ge(r.state.selection))return s(),!0;var c=be(i.doc,t)||r.state.selection,u=r.state.selection.eq(c);return a&&(u||i.setSelection(c),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}},forEach:function(t,e){return function(n){return t.every((function(t,r){return e(t,Object(v.a)(Object(v.a)({},n),{},{index:r}))}))}},insertContent:function(t,e){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},t,e)}},insertContentAt:function(t,e,n){return function(r){var o=r.tr,i=r.dispatch,a=r.editor;if(i){n=Object(v.a)({parseOptions:{},updateSelection:!0},n);var s=je(e,a.schema,{parseOptions:Object(v.a)({preserveWhitespace:"full"},n.parseOptions)});if("<>"===s.toString())return!0;var c="number"==typeof t?{from:t,to:t}:t,u=c.from,l=c.to,f=!0,h=!0;if((function(t){return t.toString().startsWith("<")}(s)?s:[s]).forEach((function(t){t.check(),f=!!f&&(t.isText&&0===t.marks.length),h=!!h&&t.isBlock})),u===l&&h){var d=o.doc.resolve(u).parent;d.isTextblock&&!d.type.spec.code&&!d.childCount&&(u-=1,l+=1)}f?o.insertText(e,u,l):o.replaceWith(u,l,s),n.updateSelection&&function(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o=t.steps[r];if(o instanceof nt||o instanceof rt){var i=t.mapping.maps[r],a=0;i.forEach((function(t,e,n,r){0===a&&(a=r)})),t.setSelection(jt.near(t.doc.resolve(a),n))}}}(o,o.steps.length-1,-1)}return!0}},joinBackward:function(){return function(t){return function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;var o=Wt(r);if(!o){var i=r.blockRange(),a=i&&at(i);return null!=a&&(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(!s.type.spec.isolating&&Kt(t,o,e))return!0;if(0==r.parent.content.size&&(Lt(s,"end")||Tt.isSelectable(s))){var c=dt(t.doc,r.before(),r.after(),$.empty);if(c&&c.slice.size<c.to-c.from){if(e){var u=t.tr.step(c);u.setSelection(Lt(s,"end")?jt.findFrom(u.doc.resolve(u.mapping.map(o.pos,-1)),-1):Tt.create(u.doc,o.pos-s.nodeSize)),e(u.scrollIntoView())}return!0}}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0)}(t.state,t.dispatch)}},joinForward:function(){return function(t){return function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=qt(r);if(!o)return!1;var i=o.nodeAfter;if(Kt(t,o,e))return!0;if(0==r.parent.content.size&&(Lt(i,"start")||Tt.isSelectable(i))){var a=dt(t.doc,r.before(),r.after(),$.empty);if(a&&a.slice.size<a.to-a.from){if(e){var s=t.tr.step(a);s.setSelection(Lt(i,"start")?jt.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):Tt.create(s.doc,s.mapping.map(o.pos))),e(s.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}(t.state,t.dispatch)}},keyboardShortcut:function(t){return function(e){var n=e.editor,r=e.view,o=e.tr,i=e.dispatch,a=function(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(var s=0;s<i.length-1;s+=1){var c=i[s];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: ".concat(c));xe()||we()?o=!0:n=!0}}return e&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),o&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}(t).split(/-(?!$)/),s=a.find((function(t){return!["Alt","Ctrl","Meta","Shift"].includes(t)})),c=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),u=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(t){return t(r,c)}))}));return null==u||u.steps.forEach((function(t){var e=t.map(o.mapping);e&&i&&o.maybeStep(e)})),!0}},lift:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return!!Se(r,ie(t,r.schema),e)&&_t(r,o)}},liftEmptyBlock:function(){return function(t){return function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(ft(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&at(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)}(t.state,t.dispatch)}},liftListItem:function(t){return function(e){var n=e.state,r=e.dispatch;return ee(ie(t,n.schema))(n,r)}},newlineInCode:function(){return function(t){return function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}(t.state,t.dispatch)}},resetAttributes:function(t,e){return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,c=Ce("string"==typeof t?t:t.name,o.schema);return!!c&&("node"===c&&(a=ie(t,o.schema)),"mark"===c&&(s=ye(t,o.schema)),i&&r.selection.ranges.forEach((function(t){o.doc.nodesBetween(t.$from.pos,t.$to.pos,(function(t,n){a&&a===t.type&&r.setNodeMarkup(n,void 0,Me(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((function(o){s===o.type&&r.addMark(n,n+t.nodeSize,s.create(Me(o.attrs,e)))}))}))})),!0)}},scrollIntoView:function(){return function(t){var e=t.tr;return t.dispatch&&e.scrollIntoView(),!0}},selectAll:function(){return function(t){var e=t.tr;return t.commands.setTextSelection({from:0,to:e.doc.content.size})}},selectNodeBackward:function(){return function(t){return function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;i=Wt(o)}var a=i&&i.nodeBefore;return!(!a||!Tt.isSelectable(a))&&(e&&e(t.tr.setSelection(Tt.create(t.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)}(t.state,t.dispatch)}},selectNodeForward:function(){return function(t){return function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;i=qt(o)}var a=i&&i.nodeAfter;return!(!a||!Tt.isSelectable(a))&&(e&&e(t.tr.setSelection(Tt.create(t.doc,i.pos)).scrollIntoView()),!0)}(t.state,t.dispatch)}},selectParentNode:function(){return function(t){return function(t,e){var n,r=t.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),e&&e(t.tr.setSelection(Tt.create(t.doc,n))),!0)}(t.state,t.dispatch)}},selectTextblockEnd:function(){return function(t){var e=t.state,n=t.dispatch;return Qt(e,n)}},selectTextblockStart:function(){return function(t){var e=t.state,n=t.dispatch;return Ut(e,n)}},setContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.tr,i=r.editor,a=r.dispatch,s=o.doc,c=Ne(t,i.schema,n);return a&&o.replaceWith(0,s.content.size,c).setMeta("preventUpdate",!e),!0}},setMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=r.selection,s=a.empty,c=a.ranges,u=ye(t,o.schema);if(i)if(s){var l=Te(o,u);r.addStoredMark(u.create(Object(v.a)(Object(v.a)({},l),e)))}else c.forEach((function(t){var n=t.$from.pos,i=t.$to.pos;o.doc.nodesBetween(n,i,(function(t,o){var a=Math.max(o,n),s=Math.min(o+t.nodeSize,i);t.marks.find((function(t){return t.type===u}))?t.marks.forEach((function(t){u===t.type&&r.addMark(a,s,u.create(Object(v.a)(Object(v.a)({},t.attrs),e)))})):r.addMark(a,s,u.create(e))}))}));return!0}},setMeta:function(t,e){return function(n){return n.tr.setMeta(t,e),!0}},setNode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch,i=n.chain,a=ie(t,r.schema);return a.isTextblock?i().command((function(t){var n=t.commands;return!!Yt(a,e)(r)||n.clearNodes()})).command((function(t){var n=t.state;return Yt(a,e)(n,o)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:function(t){return function(e){var n=e.tr;if(e.dispatch){var r=n.doc,o=jt.atStart(r).from,i=jt.atEnd(r).to,a=ke(t,o,i),s=Tt.create(r,a);n.setSelection(s)}return!0}},setTextSelection:function(t){return function(e){var n=e.tr;if(e.dispatch){var r=n.doc,o="number"==typeof t?{from:t,to:t}:t,i=o.from,a=o.to,s=Mt.atStart(r).from,c=Mt.atEnd(r).to,u=ke(i,s,c),l=ke(a,s,c),f=Mt.create(r,u,l);n.setSelection(f)}return!0}},sinkListItem:function(t){return function(e){var n=e.state,r=e.dispatch;return function(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==t}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var c=a.parent,u=c.child(s-1);if(u.type!=t)return!1;if(n){var l=u.lastChild&&u.lastChild.type==c.type,f=S.from(l?t.create():null),h=new $(S.from(t.create(null,S.from(c.type.create(null,f)))),l?3:1,0),d=a.start,p=a.end;n(e.tr.step(new rt(d-(l?3:1),p,d,p,h,1,!0)).scrollIntoView())}return!0}}(ie(t,n.schema))(n,r)}},splitBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.keepMarks,n=void 0===e||e;return function(t){var e=t.tr,r=t.state,o=t.dispatch,i=t.editor,a=e.selection,s=e.doc,c=a.$from,u=a.$to,l=Ie(i.extensionManager.attributes,c.node().type.name,c.node().attrs);if(a instanceof Tt&&a.node.isBlock)return!(!c.parentOffset||!ft(s,c.pos))&&(o&&(n&&Ee(r,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(o){var f=u.parentOffset===u.parent.content.size;a instanceof Mt&&e.deleteSelection();var h=0===c.depth?void 0:$e(c.node(-1).contentMatchAt(c.indexAfter(-1))),d=f&&h?[{type:h,attrs:l}]:void 0,p=ft(e.doc,e.mapping.map(c.pos),1,d);if(!d&&!p&&ft(e.doc,e.mapping.map(c.pos),1,h?[{type:h}]:void 0)&&(p=!0,d=h?[{type:h,attrs:l}]:void 0),p&&(e.split(e.mapping.map(c.pos),1,d),h&&!f&&!c.parentOffset&&c.parent.type!==h)){var v=e.mapping.map(c.before()),m=e.doc.resolve(v);c.node(-1).canReplaceWith(m.index(),m.index()+1,h)&&e.setNodeMarkup(e.mapping.map(c.before()),h)}n&&Ee(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0}},splitListItem:function(t){return function(e){var n,r=e.tr,o=e.state,i=e.dispatch,a=e.editor,s=ie(t,o.schema),c=o.selection,u=c.$from,l=c.$to,f=o.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(l))return!1;var h=u.node(-1);if(h.type!==s)return!1;var d=a.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==s||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){for(var p=S.empty,v=u.index(-1)?1:u.index(-2)?2:3,m=u.depth-v;m>=u.depth-3;m-=1)p=S.from(u.node(m).copy(p));var y=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,g=Ie(d,u.node().type.name,u.node().attrs),k=(null===(n=s.contentMatch.defaultType)||void 0===n?void 0:n.createAndFill(g))||void 0;p=p.append(S.from(s.createAndFill(null,k)||void 0));var b=u.before(u.depth-(v-1));r.replace(b,u.after(-y),new $(p,4-v,0));var x=-1;r.doc.nodesBetween(b,r.doc.content.size,(function(t,e){if(x>-1)return!1;t.isTextblock&&0===t.content.size&&(x=e+1)})),x>-1&&r.setSelection(Mt.near(r.doc.resolve(x))),r.scrollIntoView()}return!0}var O=l.pos===u.end()?h.contentMatchAt(0).defaultType:null,j=Ie(d,h.type.name,h.attrs),w=Ie(d,u.node().type.name,u.node().attrs);r.delete(u.pos,l.pos);var C=O?[{type:s,attrs:j},{type:O,attrs:w}]:[{type:s,attrs:j}];return!!ft(r.doc,u.pos,2)&&(i&&r.split(u.pos,2,C).scrollIntoView(),!0)}},toggleList:function(t,e){return function(n){var r=n.editor,o=n.tr,i=n.state,a=n.dispatch,s=n.chain,c=n.commands,u=n.can,l=r.extensionManager.extensions,f=ie(t,i.schema),h=ie(e,i.schema),d=i.selection,p=d.$from,v=d.$to,m=p.blockRange(v);if(!m)return!1;var y=Ae((function(t){return ze(t.type.name,l)}))(d);if(m.depth>=1&&y&&m.depth-y.depth<=1){if(y.node.type===f)return c.liftListItem(h);if(ze(y.node.type.name,l)&&f.validContent(y.node.content)&&a)return s().command((function(){return o.setNodeMarkup(y.pos,f),!0})).command((function(){return Re(o,f)})).command((function(){return Be(o,f)})).run()}return s().command((function(){return!!u().wrapInList(f)||c.clearNodes()})).wrapInList(f).command((function(){return Re(o,f)})).command((function(){return Be(o,f)})).run()}},toggleMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=n.extendEmptyMarkRange,s=void 0!==a&&a,c=ye(t,o.schema);return Fe(o,c,e)?i.unsetMark(c,{extendEmptyMarkRange:s}):i.setMark(c,e)}},toggleNode:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=ie(t,o.schema),s=ie(e,o.schema);return Se(o,a,n)?i.setNode(s):i.setNode(a,n)}},toggleWrap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.commands,i=ie(t,r.schema);return Se(r,i,e)?o.lift(i):o.wrapIn(i,e)}},undoInputRule:function(){return function(t){for(var e=t.state,n=t.dispatch,r=e.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(e))){if(n){for(var s=e.tr,c=a.transform,u=c.steps.length-1;u>=0;u-=1)s.step(c.steps[u].invert(c.docs[u]));if(a.text){var l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1}},unsetAllMarks:function(){return function(t){var e=t.tr,n=t.dispatch,r=e.selection,o=r.empty,i=r.ranges;return o||n&&i.forEach((function(t){e.removeMark(t.$from.pos,t.$to.pos)})),!0}},unsetMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=e.extendEmptyMarkRange,c=void 0!==s&&s,u=o.selection,l=ye(t,i.schema),f=u.$from,h=u.empty,d=u.ranges;if(!a)return!0;if(h&&c){var p=u.from,v=u.to,m=null===(r=f.marks().find((function(t){return t.type===l})))||void 0===r?void 0:r.attrs,y=me(f,l,m);y&&(p=y.from,v=y.to),o.removeMark(p,v,l)}else d.forEach((function(t){o.removeMark(t.$from.pos,t.$to.pos,l)}));return o.removeStoredMark(l),!0}},updateAttributes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,c=Ce("string"==typeof t?t:t.name,o.schema);return!!c&&("node"===c&&(a=ie(t,o.schema)),"mark"===c&&(s=ye(t,o.schema)),i&&r.selection.ranges.forEach((function(t){var n=t.$from.pos,i=t.$to.pos;o.doc.nodesBetween(n,i,(function(t,o){a&&a===t.type&&r.setNodeMarkup(o,void 0,Object(v.a)(Object(v.a)({},t.attrs),e)),s&&t.marks.length&&t.marks.forEach((function(a){if(s===a.type){var c=Math.max(o,n),u=Math.min(o+t.nodeSize,i);r.addMark(c,u,s.create(Object(v.a)(Object(v.a)({},a.attrs),e)))}}))}))})),!0)}},wrapIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return Xt(ie(t,r.schema),e)(r,o)}},wrapInList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return Zt(ie(t,r.schema),e)(r,o)}}});he.create({name:"commands",addCommands:function(){return Object(v.a)({},Pe)}}),he.create({name:"editable",addProseMirrorPlugins:function(){var t=this;return[new Pt({key:new Vt("editable"),props:{editable:function(){return t.editor.options.editable}}})]}}),he.create({name:"focusEvents",addProseMirrorPlugins:function(){var t=this.editor;return[new Pt({key:new Vt("focusEvents"),props:{handleDOMEvents:{focus:function(e,n){t.isFocused=!0;var r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:function(e,n){t.isFocused=!1;var r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),he.create({name:"keymap",addKeyboardShortcuts:function(){var t=this,e=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.undoInputRule()},function(){return e.command((function(t){var n=t.tr,r=n.selection,o=n.doc,i=r.empty,a=r.$anchor,s=a.pos,c=a.parent,u=jt.atStart(o).from===s;return!(!(i&&u&&c.type.isTextblock)||c.textContent.length)&&e.clearNodes()}))},function(){return e.deleteSelection()},function(){return e.joinBackward()},function(){return e.selectNodeBackward()}]}))},n=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.deleteSelection()},function(){return e.joinForward()},function(){return e.selectNodeForward()}]}))},r={Enter:function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.newlineInCode()},function(){return e.createParagraphNear()},function(){return e.liftEmptyBlock()},function(){return e.splitBlock()}]}))},"Mod-Enter":function(){return t.editor.commands.exitCode()},Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":function(){return t.editor.commands.selectAll()}},o=Object(v.a)({},r),i=Object(v.a)(Object(v.a)({},r),{},{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return t.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return t.editor.commands.selectTextblockEnd()}});return xe()||we()?i:o},addProseMirrorPlugins:function(){var t=this;return[new Pt({key:new Vt("clearDocument"),appendTransaction:function(e,n,r){if(e.some((function(t){return t.docChanged}))&&!n.doc.eq(r.doc)){var o=n.selection,i=o.empty,a=o.from,s=o.to,c=jt.atStart(n.doc).from,u=jt.atEnd(n.doc).to,l=a===c&&s===u,f=0===r.doc.textBetween(0,r.doc.content.size," "," ").length;if(!i&&l&&f){var h=r.tr,d=ne({state:r,transaction:h});return new re({editor:t.editor,state:d}).commands.clearNodes(),h.steps.length?h:void 0}}}})]}}),he.create({name:"tabindex",addProseMirrorPlugins:function(){return[new Pt({key:new Vt("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Je=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(x.a)(this,t),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Object(v.a)(Object(v.a)({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ce(oe(this,"addOptions",{name:this.name}))),this.storage=ce(oe(this,"addStorage",{name:this.name,options:this.options}))||{}}return Object(O.a)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=fe(this.options,t),e.storage=ce(oe(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=ce(oe(n,"addOptions",{name:n.name})),n.storage=ce(oe(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}(),De=Je.create({name:"column",group:"column",content:"(paragraph|block)*",isolating:!0,selectable:!1,renderHTML:function(t){return["div",ae(t.HTMLAttributes,{class:"column"}),0]}}),Ve=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n),o=n>0?t.before(n):0,i=t.start(n);if(e({node:r,pos:o,start:i}))return r.resolve(i)}throw Error("no ancestor found")},Le=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t){var r;Object(x.a)(this,n);var o=t.$from,i=t.$to;return(r=e.call(this,o,i))._$from=o,r._$to=i,r}return Object(O.a)(n,[{key:"$from",get:function(){return this._$from}},{key:"$to",get:function(){return this._$to}},{key:"map",value:function(){return this}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"column",from:this.from,to:this.to}}},{key:"expandSelection",value:function(){var t,e=this.$from.doc,n=function(t){var n=t.pos;return t.node.type.name===De.name||e.resolve(n).depth<=0};this._$from=Ve(this.$from,n),this._$to=Ve(this.$to,n),(null==(t=this.getFirstNode())?void 0:t.type.name)===We.name&&(this._$from=e.resolve(this.$from.pos+2),this._$to=e.resolve(this.$to.pos+2))}},{key:"getFirstNode",value:function(){return this.content().content.firstChild}}],[{key:"create",value:function(t,e,r){var o=t.resolve(e),i=t.resolve(r);return new n(new Mt(o,i))}}]),n}(jt),We=Je.create({name:"columnBlock",group:"block",content:"column{2,}",isolating:!0,selectable:!0,addOptions:function(){return{nestedColumns:!0,columnType:De}},renderHTML:function(t){return["div",ae(t.HTMLAttributes,{class:"column-block"}),0]},addCommands:function(){return{unsetColumns:function(){return function(t){t.state;var e=t.tr,n=t.dispatch;try{return n?n(e):void 0}catch(r){console.error(r)}}},setColumns:function(t){return function(t){var e=t.state,n=t.tr,r=t.dispatch;try{var o=e.schema;e.doc;if(!r)return;var i=new Le(e.selection);return void(n=n.setSelection(i))}catch(o){console.error(o)}}}}}}),qe=(Je.create({name:"doc",topNode:!0,content:"(block|layout)+"}),he.create({name:"columnExtension",addExtensions:function(){var t=[];return!1!==this.options.column&&t.push(De),!1!==this.options.columnBlock&&t.push(We),t}}));n(42),n(43);function _e(t){var e=t.content,n=void 0===e?"":e,r=t.editable,a=void 0===r||r,s=Object(o.c)({content:n,extensions:[i.a,qe],editable:a});return s?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"WhiteCard",children:[Object(u.jsx)(l,{editor:s}),Object(u.jsx)(f,{editor:s}),Object(u.jsx)(o.b,{editor:s})]}),Object(u.jsx)("h2",{children:"Text"}),Object(u.jsx)("div",{className:"WhiteCard",children:Object(u.jsx)("pre",{children:s.getText()})}),Object(u.jsx)("h2",{children:"JSON"}),Object(u.jsx)("div",{className:"WhiteCard",children:Object(u.jsx)("pre",{children:JSON.stringify(s.getJSON())})})]}):null}n(44);Object(r.render)(Object(u.jsx)("div",{id:"Wrapper",children:Object(u.jsx)(_e,{content:{type:"doc",content:[{type:"heading",attrs:{level:2},content:[{type:"text",text:"Hi there,"}]},{type:"paragraph",content:[{type:"text",text:"This is a "},{type:"text",marks:[{type:"italic"}],text:"basic"},{type:"text",text:" example of "},{type:"text",marks:[{type:"bold"}],text:"tiptap"},{type:"text",text:". Sure, there are all kind of basic text styles you\u2019d probably expect from a text editor. But wait until you see the lists:"}]},{type:"bulletList",content:[{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"That\u2019s a bullet list with one \u2026"}]}]},{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"\u2026 or two list items."}]},{type:"bulletList",content:[{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"Sub-item 1"}]}]},{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"Sub-item 2"}]}]}]}]}]},{type:"blockquote",content:[{type:"paragraph",content:[{type:"text",text:"Wow, that\u2019s amazing. Good work, boy! "},{type:"hardBreak"},{type:"text",text:"\u2014 Mom"}]}]},{type:"paragraph"},{type:"columnBlock",content:[{type:"column",content:[{type:"paragraph",content:[{type:"text",text:"First column"}]},{type:"paragraph",content:[{type:"text",text:"with 2 paragraphs"}]},{type:"bulletList",content:[{type:"listItem",content:[{type:"paragraph",content:[{type:"text",text:"And even a list\u2026"}]}]}]}]},{type:"column",content:[{type:"paragraph",content:[{type:"text",text:"Second column"}]}]},{type:"column",content:[{type:"paragraph",content:[{type:"text",text:"Third columns"}]}]}]}]}})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.ff9e08d0.chunk.js.map